/**
 * 对字符串进行简单的加密
 * @param sourceString 字符串
 * @return hash值
 */
export function hash(sourceString) {
    let hashCode = 0;
    let i;
    let chr;
    for (i = 0; i < sourceString.length; i++) {
        chr = sourceString.charCodeAt(i);
        // tslint:disable-next-line:no-bitwise
        hashCode = ((hashCode << 5) - hashCode) + chr;
        // tslint:disable-next-line:no-bitwise
        hashCode |= 0; // Convert to 32bit integer
    }
    return hashCode;
}
export const randomNumber = (range = 1000) => {
    return Math.floor(Math.random() * range);
};
/**
 * 转换为loading字样
 * @param target 目标字符串
 * @param suffix 后缀
 * @param length 长度
 * @example
 * '请稍候' => '请稍候.'
 * '请稍候.' => '请稍候..'
 * '请稍候..' => '请稍候...'
 * '请稍候...' => '请稍候'
 */
export function convertToLoadingFormat(target, suffix = '.', length = 3) {
    const strings = target.split(suffix);
    if (strings.length <= length) {
        target += '.';
    }
    else {
        target = strings[0];
    }
    return target;
}
/**
 * 当值为undefined或null时返回默认值
 * @param value 传入值
 * @param defaultValue 默认值
 */
export function getDefaultWhenValueIsInValid(value, defaultValue) {
    if (value === undefined || value === null || Number.isNaN(value)) {
        return defaultValue;
    }
    return value;
}
export class Assert {
    /**
     * 断言是数组
     * @param value 断言的值
     * @param message 出错提示
     */
    static isArray(value, message) {
        if (!isNotNullOrUndefined(value) || !Array.isArray(value)) {
            throw new Error(message);
        }
    }
    /**
     * 断言被定义
     * undefined 异常
     * null 成功
     * other 成功
     * @param args 多参数
     */
    static isDefined(...args) {
        const message = this.validateArgs(args);
        args.forEach(value => {
            if (!isDefined(value)) {
                throw new Error(message);
            }
        });
    }
    /**
     * 断言有整型（不包含NaN)
     * @param args
     */
    static isInteger(...args) {
        const message = this.validateArgs(args);
        args.forEach(value => {
            if (!Number.isInteger(value)) {
                throw new Error(message);
            }
        });
    }
    static isObject(...args) {
        const message = this.validateArgs(args);
        args.forEach(arg => {
            const type = typeof arg;
            const isObject = type === 'function' || type === 'object' && !!arg;
            if (!isObject) {
                throw new Error(message);
            }
        });
    }
    /**
     * 断言输入的值为字符串
     * @param args 字符串1，字符串2...提示信息
     */
    static isString(...args) {
        const message = this.validateArgs(args);
        args.forEach(value => {
            if (typeof value !== 'string') {
                throw new Error(message);
            }
        });
    }
    static isNotNullOrUndefined(...args) {
        const message = this.validateArgs(args);
        args.forEach((value, index) => {
            if (!isNotNullOrUndefined(value)) {
                throw new Error(`${message}:${index}`);
            }
        });
    }
    /**
     * 校验参考并返回参数的最后一项做为message提示消息返回
     * @param args 多个参数
     */
    static validateArgs(args) {
        if (args.length < 2) {
            throw new Error('最少输入两个参数');
        }
        if (typeof (args[args.length - 1]) !== 'string') {
            throw new Error('最后一个参数必须为字符串');
        }
        return args.pop();
    }
    static isUndefined(param) {
        if (typeof param !== 'undefined') {
            throw new Error('变量已定义');
        }
    }
    /**
     * 断言为null
     * null 成功
     * undefined 异常
     * other 异常
     * @param param 输入
     */
    static isNull(param) {
        if (typeof param === 'undefined' || param !== null) {
            throw new Error('变量非空');
        }
    }
    /**
     * 断言类型为number
     * @param args 最少输入两个参数，前面的参数为校验值，最后一个提示信息
     */
    static isNumber(...args) {
        const message = this.validateArgs(args);
        args.forEach(value => {
            if (typeof value !== 'number') {
                throw new Error(message);
            }
        });
    }
    static isTrue(...args) {
        const message = this.validateArgs(args);
        args.forEach(value => {
            if (value !== true) {
                throw new Error(message);
            }
        });
    }
}
/**
 * 是否不为null或undefined
 * undefined -> false
 * null -> false
 * other -> true
 * @param value 值
 */
export function isNotNullOrUndefined(value) {
    return value !== undefined && value !== null;
}
/**
 * 为null或undefined
 * @param value 值
 */
export function isNullOrUndefined(value) {
    return !isNotNullOrUndefined(value);
}
/**
 * 是否被定义
 * undefined -> false
 * other -> true
 * @param value 校验值
 */
export function isDefined(value) {
    return value !== undefined;
}
export function uniqueId() {
    return '_' + Math.random().toString(36).substr(2, 9);
}
// 解码
const decodeUnicode = (str) => {
    str = '\\u' + str;
    str = str.replace(/\\/g, '%');
    str = unescape(str);
    str = str.replace(/%/g, '\\');
    return str;
};
export class Random {
    /**
     * 获取随机数据
     * @param width 位宽
     */
    static nextNumber(width = 32) {
        let range = 1;
        while (width > 0) {
            range = range * 2;
            width--;
        }
        return Math.floor(Math.random() * range);
    }
    /**
     * 获取随机字符串
     * @param prefix 返回字符串的前缀
     * @param length 字符串长度
     */
    static nextString(prefix = '', length = 4) {
        let result = '';
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        const charactersLength = characters.length;
        for (let i = 0; i < length; i++) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
        }
        return prefix + result;
    }
}
/*
* 获取取机的中文字符串
*/
export const randomChineseString = (preString = '', length = 3) => {
    let name = '';
    for (let i = 0; i < length; i++) {
        let unicodeNum = '';
        unicodeNum = randomNumberByRange(0x4e00, 0x9fa5).toString(16);
        name += decodeUnicode(unicodeNum);
    }
    return preString + name;
};
/**
 * 获取指定范围内的随机数
 * @param min 最小值
 * @param max 最大值
 */
const randomNumberByRange = (min = 0, max = 1000) => {
    return Math.floor(Math.random() * (min - max) + max);
};
/**
 * 随机时间戳
 * @param day 随机生成的时间范围（天）
 * @param baseDate 生成时间范围基于某天
 * @sample
 * randomTimestamp(10, new Date(2020, 7, 12))
 * 返回：2020年7月12日前后10天的随机一天
 */
export const randomTimestamp = (day = 7, baseDate = new Date()) => {
    const range = 1000 * 60 * 60 * 24 * day * 2;
    return baseDate.getTime() + randomNumber(range) - range / 2;
};
export const randomBoolean = () => {
    return randomNumber(10) % 2 === 0;
};
export const randomString = (prefix = '', length = 4) => {
    let result = '';
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    const charactersLength = characters.length;
    for (let i = 0; i < length; i++) {
        result += characters.charAt(Math.floor(Math.random() * charactersLength));
    }
    return prefix + result;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tb2NrLWFwaS9zcmMvbGliL3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVUsSUFBSSxDQUFDLFlBQW9CO0lBQ3ZDLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQztJQUNqQixJQUFJLENBQUMsQ0FBQztJQUNOLElBQUksR0FBRyxDQUFDO0lBQ1IsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxZQUFZLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3hDLEdBQUcsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLHNDQUFzQztRQUN0QyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDOUMsc0NBQXNDO1FBQ3RDLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQywyQkFBMkI7S0FDM0M7SUFDRCxPQUFPLFFBQVEsQ0FBQztBQUNsQixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksRUFBRSxFQUFFO0lBQzNDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUM7QUFDM0MsQ0FBQyxDQUFDO0FBRUY7Ozs7Ozs7Ozs7R0FVRztBQUNILE1BQU0sVUFBVSxzQkFBc0IsQ0FBQyxNQUFjLEVBQUUsTUFBTSxHQUFHLEdBQUcsRUFBRSxNQUFNLEdBQUcsQ0FBQztJQUM3RSxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3JDLElBQUksT0FBTyxDQUFDLE1BQU0sSUFBSSxNQUFNLEVBQUU7UUFDNUIsTUFBTSxJQUFJ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LEtBQUssQ0FBQyxDQUFDO0FBQ3BDLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBRyxDQUFDLE1BQU0sR0FBRyxFQUFFLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFO0lBQ3RELElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUNoQixNQUFNLFVBQVUsR0FBRyxnRUFBZ0UsQ0FBQztJQUNwRixNQUFNLGdCQUFnQixHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUM7SUFDM0MsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUMvQixNQUFNLElBQUksVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7S0FDM0U7SUFDRCxPQUFPLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDekIsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDlr7nlrZfnrKbkuLLov5vooYznroDljZXnmoTliqDlr4ZcbiAqIEBwYXJhbSBzb3VyY2VTdHJpbmcg5a2X56ym5LiyXG4gKiBAcmV0dXJuIGhhc2jlgLxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc2goc291cmNlU3RyaW5nOiBzdHJpbmcpOiBudW1iZXIge1xuICBsZXQgaGFzaENvZGUgPSAwO1xuICBsZXQgaTtcbiAgbGV0IGNocjtcbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgIGNociA9IHNvdXJjZVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1iaXR3aXNlXG4gICAgaGFzaENvZGUgPSAoKGhhc2hDb2RlIDw8IDUpIC0gaGFzaENvZGUpICsgY2hyO1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1iaXR3aXNlXG4gICAgaGFzaENvZGUgfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG4gIH1cbiAgcmV0dXJuIGhhc2hDb2RlO1xufVxuXG5leHBvcnQgY29uc3QgcmFuZG9tTnVtYmVyID0gKHJhbmdlID0gMTAwMCkgPT4ge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcmFuZ2UpO1xufTtcblxuLyoqXG4gKiDovazmjaLkuLpsb2FkaW5n5a2X5qC3XG4gKiBAcGFyYW0gdGFyZ2V0IOebruagh+Wtl+espuS4slxuICogQHBhcmFtIHN1ZmZpeCDlkI7nvIBcbiAqIEBwYXJhbSBsZW5ndGgg6ZW/5bqmXG4gKiBAZXhhbXBsZVxuICogJ+ivt+eojeWAmScgPT4gJ+ivt+eojeWAmS4nXG4gKiAn6K+356iN5YCZLicgPT4gJ+ivt+eojeWAmS4uJ1xuICogJ+ivt+eojeWAmS4uJyA9PiAn6K+356iN5YCZLi4uJ1xuICogJ+ivt+eojeWAmS4uLicgPT4gJ+ivt+eojeWAmSdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb0xvYWRpbmdGb3JtYXQodGFyZ2V0OiBzdHJpbmcsIHN1ZmZpeCA9ICcuJywgbGVuZ3RoID0gMyk6IHN0cmluZyB7XG4gIGNvbnN0IHN0cmluZ3MgPSB0YXJnZXQuc3BsaXQoc3VmZml4KTtcbiAgaWYgKHN0cmluZ3MubGVuZ3RoIDw9IGxlbmd0aCkge1xuICAgIHRhcmdldCArPSAnLic7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0ID0gc3RyaW5nc1swXTtcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIOW9k+WAvOS4unVuZGVmaW5lZOaIlm51bGzml7bov5Tlm57pu5jorqTlgLxcbiAqIEBwYXJhbSB2YWx1ZSDkvKDlhaXlgLxcbiAqIEBwYXJhbSBkZWZhdWx0VmFsdWUg6buY6K6k5YC8XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0V2hlblZhbHVlSXNJblZhbGlkPFQ+KHZhbHVlOiBULCBkZWZhdWx0VmFsdWU6IFQpOiBUIHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwgfHwgTnVtYmVyLmlzTmFOKHZhbHVlKSApIHtcbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5cblxuZXhwb3J0IGNsYXNzIEFzc2VydCB7XG4gIC8qKlxuICAgKiDmlq3oqIDmmK/mlbDnu4RcbiAgICogQHBhcmFtIHZhbHVlIOaWreiogOeahOWAvFxuICAgKiBAcGFyYW0gbWVzc2FnZSDlh7rplJnmj5DnpLpcbiAgICovXG4gIHN0YXRpYyBpc0FycmF5KHZhbHVlOiBhbnksIG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghaXNOb3ROdWxsT3JVbmRlZmluZWQodmFsdWUpIHx8ICFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICog5pat6KiA6KKr5a6a5LmJXG4gICAqIHVuZGVmaW5lZCDlvILluLhcbiAgICogbnVsbCDmiJDlip9cbiAgICogb3RoZXIg5oiQ5YqfXG4gICAqIEBwYXJhbSBhcmdzIOWkmuWPguaVsFxuICAgKi9cbiAgc3RhdGljIGlzRGVmaW5lZCguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnZhbGlkYXRlQXJncyhhcmdzKTtcbiAgICBhcmdzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgaWYgKCFpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmlq3oqIDmnInmlbTlnovvvIjkuI3ljIXlkKtOYU4pXG4gICAqIEBwYXJhbSBhcmdzXG4gICAqL1xuICBzdGF0aWMgaXNJbnRlZ2VyKC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMudmFsaWRhdGVBcmdzKGFyZ3MpO1xuICAgIGFyZ3MuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBpc09iamVjdCguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnZhbGlkYXRlQXJncyhhcmdzKTtcbiAgICBhcmdzLmZvckVhY2goYXJnID0+IHtcbiAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgYXJnO1xuICAgICAgY29uc3QgaXNPYmplY3QgPSB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhYXJnO1xuICAgICAgaWYgKCFpc09iamVjdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5pat6KiA6L6T5YWl55qE5YC85Li65a2X56ym5LiyXG4gICAqIEBwYXJhbSBhcmdzIOWtl+espuS4sjHvvIzlrZfnrKbkuLIyLi4u5o+Q56S65L+h5oGvXG4gICAqL1xuICBzdGF0aWMgaXNTdHJpbmcoLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy52YWxpZGF0ZUFyZ3MoYXJncyk7XG4gICAgYXJncy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBpc05vdE51bGxPclVuZGVmaW5lZCguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnZhbGlkYXRlQXJncyhhcmdzKTtcbiAgICBhcmdzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKCFpc05vdE51bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke21lc3NhZ2V9OiR7aW5kZXh9YCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5qCh6aqM5Y+C6ICD5bm26L+U5Zue5Y+C5pWw55qE5pyA5ZCO5LiA6aG55YGa5Li6bWVzc2FnZeaPkOekuua2iOaBr+i/lOWbnlxuICAgKiBAcGFyYW0gYXJncyDlpJrkuKrlj4LmlbBcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIHZhbGlkYXRlQXJncyhhcmdzOiBhbnlbXSk6IHN0cmluZyB7XG4gICAgaWYgKGFyZ3MubGVuZ3RoIDwgMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfmnIDlsJHovpPlhaXkuKTkuKrlj4LmlbAnKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIChhcmdzW2FyZ3MubGVuZ3RoIC0gMV0pICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfmnIDlkI7kuIDkuKrlj4LmlbDlv4XpobvkuLrlrZfnrKbkuLInKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJncy5wb3AoKTtcbiAgfVxuXG4gIHN0YXRpYyBpc1VuZGVmaW5lZChwYXJhbTogYW55KTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiBwYXJhbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign5Y+Y6YeP5bey5a6a5LmJJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaWreiogOS4um51bGxcbiAgICogbnVsbCDmiJDlip9cbiAgICogdW5kZWZpbmVkIOW8guW4uFxuICAgKiBvdGhlciDlvILluLhcbiAgICogQHBhcmFtIHBhcmFtIOi+k+WFpVxuICAgKi9cbiAgc3RhdGljIGlzTnVsbChwYXJhbTogYW55KTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiBwYXJhbSA9PT0gJ3VuZGVmaW5lZCcgfHwgcGFyYW0gIT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign5Y+Y6YeP6Z2e56m6Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaWreiogOexu+Wei+S4um51bWJlclxuICAgKiBAcGFyYW0gYXJncyDmnIDlsJHovpPlhaXkuKTkuKrlj4LmlbDvvIzliY3pnaLnmoTlj4LmlbDkuLrmoKHpqozlgLzvvIzmnIDlkI7kuIDkuKrmj5DnpLrkv6Hmga9cbiAgICovXG4gIHN0YXRpYyBpc051bWJlciguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnZhbGlkYXRlQXJncyhhcmdzKTtcbiAgICBhcmdzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGlzVHJ1ZSguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnZhbGlkYXRlQXJncyhhcmdzKTtcbiAgICBhcmdzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgaWYgKHZhbHVlICE9PSB0cnVlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIOaYr+WQpuS4jeS4um51bGzmiJZ1bmRlZmluZWRcbiAqIHVuZGVmaW5lZCAtPiBmYWxzZVxuICogbnVsbCAtPiBmYWxzZVxuICogb3RoZXIgLT4gdHJ1ZVxuICogQHBhcmFtIHZhbHVlIOWAvFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOb3ROdWxsT3JVbmRlZmluZWQ8VD4odmFsdWU6IFQgfCB1bmRlZmluZWQgfCBudWxsKTogdmFsdWUgaXMgVCB7XG4gIHJldHVybiB2YWx1ZSBhcyBUICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgYXMgVCAhPT0gbnVsbDtcbn1cblxuLyoqXG4gKiDkuLpudWxs5oiWdW5kZWZpbmVkXG4gKiBAcGFyYW0gdmFsdWUg5YC8XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZDxUPih2YWx1ZTogVCB8IHVuZGVmaW5lZCB8IG51bGwpOiB2YWx1ZSBpcyBUIHtcbiAgcmV0dXJuICFpc05vdE51bGxPclVuZGVmaW5lZCh2YWx1ZSk7XG59XG5cbi8qKlxuICog5piv5ZCm6KKr5a6a5LmJXG4gKiB1bmRlZmluZWQgLT4gZmFsc2VcbiAqIG90aGVyIC0+IHRydWVcbiAqIEBwYXJhbSB2YWx1ZSDmoKHpqozlgLxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGVmaW5lZDxUPih2YWx1ZTogVCB8IHVuZGVmaW5lZCk6IHZhbHVlIGlzIFQge1xuICByZXR1cm4gdmFsdWUgYXMgVCAhPT0gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5pcXVlSWQoKTogc3RyaW5nIHtcbiAgcmV0dXJuICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbn1cblxuLyoqXG4gKiDlj6rljIXlkKvlsZ7mgKfogIzkuI3ljIXlkKvmlrnms5VcbiAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzUyNjkyNjA2L2hvdy10by1kZWNsYXJlLWEtdHlwZS1pbi10eXBlc2NyaXB0LXRoYXQtb25seS1pbmNsdWRlcy1vYmplY3RzLWFuZC1ub3QtZnVuY3Rpb25zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVW5rbm93blByb3BlcnR5IHtcbiAgW2s6IHN0cmluZ106IHVua25vd247XG59XG5cblxuLy8g6Kej56CBXG5jb25zdCBkZWNvZGVVbmljb2RlID0gKHN0cjogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgc3RyID0gJ1xcXFx1JyArIHN0cjtcbiAgc3RyID0gc3RyLnJlcGxhY2UoL1xcXFwvZywgJyUnKTtcblxuICBzdHIgPSB1bmVzY2FwZShzdHIpO1xuICBzdHIgPSBzdHIucmVwbGFjZSgvJS9nLCAnXFxcXCcpO1xuICByZXR1cm4gc3RyO1xufTtcblxuZXhwb3J0IGNsYXNzIFJhbmRvbSB7XG4gIC8qKlxuICAgKiDojrflj5bpmo/mnLrmlbDmja5cbiAgICogQHBhcmFtIHdpZHRoIOS9jeWuvVxuICAgKi9cbiAgc3RhdGljIG5leHROdW1iZXIod2lkdGggPSAzMik6IG51bWJlciB7XG4gICAgbGV0IHJhbmdlID0gMTtcbiAgICB3aGlsZSAod2lkdGggPiAwKSB7XG4gICAgICByYW5nZSA9IHJhbmdlICogMjtcbiAgICAgIHdpZHRoLS07XG4gICAgfVxuXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHJhbmdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bpmo/mnLrlrZfnrKbkuLJcbiAgICogQHBhcmFtIHByZWZpeCDov5Tlm57lrZfnrKbkuLLnmoTliY3nvIBcbiAgICogQHBhcmFtIGxlbmd0aCDlrZfnrKbkuLLplb/luqZcbiAgICovXG4gIHN0YXRpYyBuZXh0U3RyaW5nKHByZWZpeCA9ICcnLCBsZW5ndGggPSA0KTogc3RyaW5nIHtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgY29uc3QgY2hhcmFjdGVycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7XG4gICAgY29uc3QgY2hhcmFjdGVyc0xlbmd0aCA9IGNoYXJhY3RlcnMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gICAgfVxuICAgIHJldHVybiBwcmVmaXggKyByZXN1bHQ7XG4gIH1cbn1cblxuLypcbiog6I635Y+W5Y+W5py655qE5Lit5paH5a2X56ym5LiyXG4qL1xuZXhwb3J0IGNvbnN0IHJhbmRvbUNoaW5lc2VTdHJpbmcgPSAocHJlU3RyaW5nID0gJycsIGxlbmd0aCA9IDMpOiBzdHJpbmcgPT4ge1xuICBsZXQgbmFtZSA9ICcnO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHVuaWNvZGVOdW0gPSAnJztcbiAgICB1bmljb2RlTnVtID0gcmFuZG9tTnVtYmVyQnlSYW5nZSgweDRlMDAsIDB4OWZhNSkudG9TdHJpbmcoMTYpO1xuICAgIG5hbWUgKz0gZGVjb2RlVW5pY29kZSh1bmljb2RlTnVtKTtcbiAgfVxuICByZXR1cm4gcHJlU3RyaW5nICsgbmFtZTtcbn07XG5cbi8qKlxuICog6I635Y+W5oyH5a6a6IyD5Zu05YaF55qE6ZqP5py65pWwXG4gKiBAcGFyYW0gbWluIOacgOWwj+WAvFxuICogQHBhcmFtIG1heCDmnIDlpKflgLxcbiAqL1xuY29uc3QgcmFuZG9tTnVtYmVyQnlSYW5nZSA9IChtaW4gPSAwLCBtYXggPSAxMDAwKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtaW4gLSBtYXgpICsgbWF4KTtcbn07XG5cbi8qKlxuICog6ZqP5py65pe26Ze05oizXG4gKiBAcGFyYW0gZGF5IOmaj+acuueUn+aIkOeahOaXtumXtOiMg+WbtO+8iOWkqe+8iVxuICogQHBhcmFtIGJhc2VEYXRlIOeUn+aIkOaXtumXtOiMg+WbtOWfuuS6juafkOWkqVxuICogQHNhbXBsZVxuICogcmFuZG9tVGltZXN0YW1wKDEwLCBuZXcgRGF0ZSgyMDIwLCA3LCAxMikpXG4gKiDov5Tlm57vvJoyMDIw5bm0N+aciDEy5pel5YmN5ZCOMTDlpKnnmoTpmo/mnLrkuIDlpKlcbiAqL1xuZXhwb3J0IGNvbnN0IHJhbmRvbVRpbWVzdGFtcCA9IChkYXkgPSA3LCBiYXNlRGF0ZSA9IG5ldyBEYXRlKCkpID0+IHtcbiAgY29uc3QgcmFuZ2UgPSAxMDAwICogNjAgKiA2MCAqIDI0ICogZGF5ICogMjtcbiAgcmV0dXJuIGJhc2VEYXRlLmdldFRpbWUoKSArIHJhbmRvbU51bWJlcihyYW5nZSkgLSByYW5nZSAvIDI7XG59O1xuXG5cbmV4cG9ydCBjb25zdCByYW5kb21Cb29sZWFuID0gKCkgPT4ge1xuICByZXR1cm4gcmFuZG9tTnVtYmVyKDEwKSAlIDIgPT09IDA7XG59O1xuXG5leHBvcnQgY29uc3QgcmFuZG9tU3RyaW5nID0gKHByZWZpeCA9ICcnLCBsZW5ndGggPSA0KSA9PiB7XG4gIGxldCByZXN1bHQgPSAnJztcbiAgY29uc3QgY2hhcmFjdGVycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7XG4gIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gIH1cbiAgcmV0dXJuIHByZWZpeCArIHJlc3VsdDtcbn07XG4iXX0=